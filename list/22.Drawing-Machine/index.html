<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Content-Language" content="ko-KR">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <link rel="stylesheet" href="../common/css/font.cdn.css">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/style.css"/>
    <link href="https://webfontworld.github.io/gmarket/GmarketSans.css" rel="stylesheet">
    <title>TEST</title>
</head>
<body>
    <style>
        
    </style>
    <div class="draw-promo-wrap">
        <!-- # 타이틀 영역 -->
        <h1 class="draw-promo-head">
            <p><strong>최대 30만원</strong> 페이백의 행운!</p>
            100% 당첨 보물 뽑기
        </h1>
        <!-- // -->

        <!-- # 뽑기 영역 -->
        <section class="draw-cont-machine">
            <div class="flower01 obj"><img src="./images/img_obj_flower01.png"></div>
            <div class="flower02 obj"><img src="./images/img_obj_flower02.png"></div>
            <div class="leaves01 obj"><img src="./images/img_obj_leaves01.png"></div>
            <div class="machine-body">
                <div class="machine-frame">
                    <div class="machine-crane">
                        <div class="machine-crane-left"></div>
                        <div class="machine-crane-right"></div>
                    </div>
                </div>
            </div>
            <div class="draw-cont-btn">
                <button type="button" class="base-btn arr" id="drawActBtn">지금 뽑아보세요</button>
                <p>타임딜 차량 구매시 사용 가능한<br>보물같은 쿠폰을 드려요</p>
            </div>
        </section>
        <!-- // -->

        <!-- # 혜택 영역 -->
        <section class="draw-cont-benefit">
            <div class="bene-img">
                <img src="./images/bg_draw_benefit.png" alt="이벤트 경품">
            </div>
        </section>
        <!-- // -->

        <!-- # 뽑기 결과 -->
        <section class="draw-result-wrap">
            <div class="result-box">
                <div class="twinkle01 obj2"><img src="./images/img_obj_twinkle01.png"></div>
                <div class="twinkle02 obj2"><img src="./images/img_obj_twinkle02.png"></div>
                <div class="twinkle03 obj2"><img src="./images/img_obj_twinkle03.png"></div>
            </div>
            <h2><p>타임딜 차량 온라인계약 시 사용 가능해요 </p></h2>
            <div class="inp-box">
                <p>쿠폰을 받으실 전화번호를 남겨주세요! </p>
                <input type="number" placeholder="010 0000 0000" id="phoneNum">
            </div>
            <div class="draw-cont-btn">
                <button type="button" class="base-btn" id="drawSendBtn">쿠폰 발송하기</button>
            </div>
        </section>
        <!-- // -->

        <!-- # 뽑기 발송 완료 -->
        <section class="draw-send-wrap">
            <div class="leaves01 obj"><img src="./images/img_obj_leaves01.png"></div>
            <div class="leaves02 obj"><img src="./images/img_obj_leaves02.png"></div>
            <div class="send-img"><img src="./images/img_send_visual.png"></div>
            <h2>
                당첨 쿠폰을 <br>문자로 발송했어요!
                <p>2024. 04. 30까지<br>타임딜 차량 구매시 사용 가능해요<br><br>온라인 계약 후 세일즈매니저에게<br>쿠폰사용을 요청하세요</p>
            </h2>
            <div class="draw-cont-btn">
                <button type="button" class="base-btn" id="drawClose">현재 창 닫기</button>
            </div>
        </section>
        <!-- // -->
    </div>
    <!-- # 유의사항 영역 -->
    <div class="draw-promo-noti">
        <p class="tit">※ 뽑기 이벤트 참여 및 당첨은 인당 1회만 가능합니다.</p>
        <div class="noti-list">
            <strong>꼭 읽어주세요!</strong>
            <ul>
                <li>뽑기 이벤트 당첨 시 제공되는 쿠폰은 ‘타임딜’ 차량 구매 시 사용 가능합니다.</li>
                <li>발급된 쿠폰은 휴대폰 문자로 발송되며, 쿠폰 사용은 차량 온라인 구매 후 담당 세일즈 매니저에게 사용 문의 부탁드립니다.</li>
                <li>1~3등 당첨 페이백은 신세계 상품권으로 제공되며, 계약 익월 휴대폰 번호로 발송됩니다.</li>
                <li>4등 당첨 스타벅스 아메리카노는 계약 익월 휴대폰번호로 발송됩니다.</li>
                <li>차량 재고 소진 시 해당 이벤트는 조기종료되며, 대차 프로모션을 제외한 타 이벤트 할인 등과 중복 사용은 불가합니다.</li>
            </ul>
        </div>
    </div>
    <!-- // -->

    <script src="../common/js/jquery-3.3.1.min.js"></script>
    <script src="../common/js/swiper.min.js"></script>
    <script src="./js/custom.js"></script>
    <script>
        var wrapper = $('.draw-promo-wrap');
        var benefitOpt= {}

        function drawAction(sec){
            wrapper.find('#drawActBtn').attr('disabled', true);
            wrapper.find('.machine-crane').addClass('active');
            $('html, body').animate({ scrollTop: 0 }, 500);

            setTimeout(function(){
                var randomNum = Math.floor(Math.random()*100+1);

                if(randomNum <= 5) {
                    benefitOpt.rank = 1;
                    benefitOpt.title = '‘1등! 페이백 30만원’ 당첨';
                }else if(randomNum <= 10) {
                    benefitOpt.rank = 2;
                    benefitOpt.title = '‘2등! 페이백 10만원’ 당첨';
                }else if(randomNum <= 15) {
                    benefitOpt.rank = 3;
                    benefitOpt.title = '‘3등! 페이백 5만원’ 당첨';
                }else{
                    benefitOpt.rank = 4;
                    benefitOpt.title = '스타벅스 아메리카노(Tall) 당첨';
                }

                wrapper.find('.draw-result-wrap h2').prepend(benefitOpt.title);
                wrapper.find('.draw-result-wrap .result-box').addClass('rank' + benefitOpt.rank);
                wrapper.find('.draw-cont-benefit, .draw-cont-machine > .draw-cont-btn, [class*="flower"]').hide();
                wrapper.find('.draw-result-wrap').addClass('show').show();
            }, sec * 1000);
        }

        function drawSend(){
            wrapper.addClass('bgChange');
            wrapper.find('.draw-result-wrap').removeClass('show'); 
            wrapper.find('.draw-cont-machine, .draw-result-wrap').hide();
            wrapper.find('.draw-send-wrap').addClass('show').show();
            $('html, body').animate({ scrollTop: 0 }, 500);
        }

        $(document).ready(function(){
            if(wrapper.length){
                $('#drawActBtn').on('click', function(e) {
                    e.preventDefault();
                    drawAction(5.4);
                });
                $('#drawSendBtn').on('click', function(e) {
                    e.preventDefault();
                    drawSend();
                });
            }
        });
    </script>
</body>
</html>
